#!/usr/bin/env bash

source Kraken-Parallel.sh

log_path="/tmp/op-log"
version="v0.2.0-alpha"
limit_parallel=10

function version(){
    echo "
#=================#
# Kraken-Parallel #
#=================#

 Version: $version
 Author: Bruno Dupim
 Project: https://github.com/brunodupim08/Kraken-Parallel.git
"
}
#Option.
[[ "$#" -eq "0" ]] && usage
indf=0
while [[ "$#" -ne "0" ]]; do
    if [[ -z "$1" ]]; then
        shift
    fi
    case "${1}" in
        --version) version
            exit 0
        ;;
        -h|--help) cat usage.txt
            exit 0
        ;;
        -m|--max-parallel) #limit_parallel
            shift
            limit_parallel=${1}
            shift
        ;;
        -v|--verbose) 
            verbose=true
            shift
        ;;
        --new-log)
            new_log=true
            shift
        ;;
        --log-path) 
            shift
            log_path=${1}
            shift
        ;;
        -c) #Fixed Command
            shift
            fixed_command_input=${1}
            shift
        ;;
        -f) #Files
            shift
            while [[ -e "${1}" ]]; do
                if [[ ! -d "${1}" ]]; then
                    list_of_files_input[${indf}]=${1}
                    ((indf++))
                fi
                shift
            done
        ;;
        *) #usage
            usage
            exit 1
        ;;
    esac
done
[[ ! -n "${list_of_files_input[@]}" ]] && usage || tentacles
